<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=84IeNkgn7Llq5SxTLYEAYSUtPfispk2Nf_HnDByoHUUlynhAWA8-oq-rgGn_q7it');ol{margin:0;padding:0}table td,table th{padding:0}.c14{background-color:#ffffff;-webkit-text-decoration-skip:none;color:#000000;font-weight:400;text-decoration:underline;vertical-align:baseline;text-decoration-skip-ink:none;font-size:12pt;font-family:"Arial";font-style:normal}.c2{background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c20{margin-left:-0.8pt;padding-top:30pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left;height:11pt}.c5{margin-left:-0.8pt;padding-top:6pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c17{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:30pt;font-family:"Economica";font-style:normal}.c1{margin-left:-0.8pt;padding-top:10pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c6{margin-left:-0.8pt;padding-top:12pt;padding-bottom:2pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c9{background-color:#ffffff;color:#000000;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c18{margin-left:-0.8pt;padding-top:3pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c21{color:#666666;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Economica";font-style:normal}.c13{margin-left:-0.8pt;padding-top:0pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c19{color:#999999;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Economica";font-style:normal}.c22{background-color:#ffffff;-webkit-text-decoration-skip:none;font-weight:400;text-decoration:underline;text-decoration-skip-ink:none;font-size:12pt;font-family:"Arial"}.c0{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Open Sans";font-style:normal}.c7{color:#000000;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Open Sans";font-style:normal}.c3{padding-top:12pt;padding-bottom:12pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c11{color:#000000;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Open Sans";font-style:normal}.c15{padding-top:0pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c16{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c10{color:inherit;text-decoration:inherit}.c12{text-indent:0.8pt}.c4{font-weight:700}.c8{font-style:italic}.title{padding-top:0pt;color:#000000;font-size:30pt;padding-bottom:0pt;font-family:"Economica";line-height:1.0;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#999999;font-size:14pt;padding-bottom:0pt;font-family:"Economica";line-height:1.0;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Open Sans"}p{margin:0;color:#000000;font-size:11pt;font-family:"Open Sans"}h1{padding-top:10pt;color:#000000;font-weight:700;font-size:16pt;padding-bottom:0pt;font-family:"Open Sans";line-height:1.5;orphans:2;widows:2;text-align:left}h2{padding-top:24pt;color:#000000;font-weight:700;font-size:13pt;padding-bottom:0pt;font-family:"Open Sans";line-height:1.0;orphans:2;widows:2;text-align:left}h3{padding-top:10pt;color:#8c7252;font-weight:700;font-size:12pt;padding-bottom:0pt;font-family:"Open Sans";line-height:1.5;orphans:2;widows:2;text-align:left}h4{padding-top:8pt;-webkit-text-decoration-skip:none;color:#666666;text-decoration:underline;font-size:11pt;padding-bottom:0pt;line-height:1.5;page-break-after:avoid;text-decoration-skip-ink:none;font-family:"Trebuchet MS";orphans:2;widows:2;text-align:left}h5{padding-top:8pt;color:#666666;font-size:11pt;padding-bottom:0pt;font-family:"Trebuchet MS";line-height:1.5;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:8pt;color:#666666;font-size:11pt;padding-bottom:0pt;font-family:"Trebuchet MS";line-height:1.5;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c16"><div><p class="c20 subtitle" id="h.leajue2ys1lr"><span class="c19"></span></p><p class="c13"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 2.67px;"><img alt="" src="images/image2.png" style="width: 624.00px; height: 2.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="horizontal line"></span></p></div><p class="c13"><span class="c21">WEB DEVELOPMENT</span></p><p class="c12 c15 title" id="h.mbjsiz6n6jlo"><span class="c4">CUSTOMIZING DEFAULT USER MODEL IN DJANGO</span></p><p class="c18"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 4.00px;"><img alt="" src="images/image1.png" style="width: 624.00px; height: 4.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="horizontal line"></span></p><h1 class="c5" id="h.vydniszftb1n"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 622.50px; height: 444.93px;"><img alt="" src="images/image3.jpg" style="width: 622.50px; height: 466.88px; margin-left: 0.00px; margin-top: -10.97px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="Placeholder image"></span></h1><h1 class="c1" id="h.arolcxe0i15c"><span>Introduction</span></h1><p class="c1 c12"><span class="c2">Have you ever wondered what an easy life looks like? It&rsquo;s pretty similar to django. But, you have to work to make your life easy. So is the case with django.</span></p><p class="c1 c12"><span class="c2">This article assumes you have basic working knowledge about Django and DRF( Django Rest Framework). If not, refer to this YouTube tutorial and then proceed ,</span></p><p class="c3"><span class="c22"><a class="c10" href="https://www.google.com/url?q=https://youtube.com/playlist?list%3DPLillGF-RfqbbRA-CIUxlxkUpbq0IFkX60&amp;sa=D&amp;source=editors&amp;ust=1621502238280000&amp;usg=AOvVaw3xgVpsiMk6Z6-YqGlLoWVR">https://youtube.com/playlist?list=PLillGF-RfqbbRA-CIUxlxkUpbq0IFkX60</a></span></p><p class="c3"><span class="c2">I will give you a quick gist about them.</span></p><p class="c3"><span class="c2">Django &mdash; It is a python based full-stack web development framework which enables us to develop both the back-end as well as the front-end within a single project.</span></p><p class="c3"><span class="c2">Why Django? If performance and efficiency is what you are looking for with more security, then Django is the way to go. It offers better security and better performance as it has an inbuilt-template house that offers quick development.</span></p><p class="c3"><span class="c2">Django Rest Framework &mdash; It is a python based toolkit built on top of the Django web framework for developing Rest APIs for Django based applications. It offers a great deal of options to develop the Rest APIs according to our needs.</span></p><p class="c3"><span class="c2">Let&#39;s get our hands dirty now&hellip;.</span></p><p class="c3"><span class="c2">Here I will be adding two extra fields, bio and dp which are not present in the default User model provided by Django.</span></p><h4 class="c6 c12" id="h.vds4i7l08eeb"><span class="c4 c9">Create a UserProfile model in the accounts(or similar folder for the users) folder and under models.py file as,</span></h4><p class="c1"><span class="c0">_______________________________________________________________________________________________</span></p><p class="c1"><span class="c0">class UserProfile(models.Model):</span></p><p class="c1"><span class="c0">user = models.OneToOneField(User, on_delete= models.CASCADE, null = True, related_name=&#39;userprofile&#39;)</span></p><p class="c1"><span class="c0">bio = models.TextField(blank=True, null=True)</span></p><p class="c1"><span class="c0">dp = models.ImageField(upload_to = &quot;dps/&quot;, blank= True, null = True)</span></p><p class="c1"><span class="c0">def ___str__(self):</span></p><p class="c1"><span class="c0">&nbsp; &nbsp;return str(self.user)</span></p><p class="c1"><span class="c0">_______________________________________________________________________________________________</span></p><p class="c3"><span class="c0">Here we observe that to define a one-to-one relation with the default User model as provided by Django we use OneToOneField. What this means is that for every user there will be only one instance of bio and dp fields.</span></p><p class="c3"><span class="c0">Since we are using DRF, we need to serialize the data in order to be able to receive and send the data from/to the front-end in a suitable format(in JSON format usually).</span></p><h4 class="c6" id="h.rvupqm9h861e"><span class="c7 c4">So in serializers.py import the UserProfile Model and add,</span></h4><p class="c1"><span class="c0">_______________________________________________________________________________________________</span></p><p class="c1"><span class="c0">## UserProfile Serializer</span></p><p class="c1"><span class="c0">class UserProfileSerializer(serializers.ModelSerializer):</span></p><p class="c1"><span class="c0">class Meta:</span></p><p class="c1"><span class="c0">model = UserProfile</span></p><p class="c1"><span class="c0">fields = &quot;__all__&quot;</span></p><p class="c1"><span class="c0">_______________________________________________________________________________________________</span></p><p class="c3"><span class="c0">I am using the ModelSerializer as provided by the serializers module of DRF, for serializing the data. The fields specify the data that will be accepted as well as sent.</span></p><h4 class="c6" id="h.1pg8259bvnh"><span class="c7 c4">Modify the UserSerializer as,</span></h4><p class="c1"><span class="c0">_______________________________________________________________________________________________</span></p><p class="c1"><span class="c0">## User Serializer</span></p><p class="c1"><span class="c0">class UserSerializer(serializers.ModelSerializer):</span></p><p class="c1"><span class="c0">user_profile = UserProfileSerializer(source=&#39;userprofile&#39;, read_only= True)</span></p><p class="c1"><span class="c0">class Meta:</span></p><p class="c1"><span class="c0">model = User</span></p><p class="c1"><span class="c0">fields = (&#39;id&#39;,&#39;username&#39;, &#39;email&#39;, &#39;user_profile&#39;)</span></p><p class="c1"><span class="c0">_______________________________________________________________________________________________</span></p><p class="c3"><span class="c0">Here we see that to send the complete data to the user, we use UserProfileSerializer to serialize the profile of the user(s) and to do so we define the source to be the related_name in the user field of the model. This works in the sense, when we define a one-to-one relation of the profile model with the User model, the profile model is connected with the user model using the related_name so it is like,</span></p><h4 class="c6" id="h.kbr6mx7e19gf"><span class="c7 c4">UserProfile Model &rarr; &ldquo;related to&rdquo; &rarr; User Model &rarr; as &rarr; &ldquo;userprofile&rdquo;</span></h4><p class="c3"><span>Now we have the </span><span class="c4">serializer</span><span>&nbsp;ready .To interact with it though, we need to create the </span><span class="c4">Api</span><span class="c0">&nbsp;class for the profile so that the user can fetch as well as update their profile.</span></p><h4 class="c6" id="h.uz4fpynu602j"><span class="c7 c4">So, in the api.py file import the UserProfileSerializer and the UserProfile model. Then add,</span></h4><p class="c1"><span class="c0">_______________________________________________________________________________________________</span></p><p class="c1"><span class="c0">##ProfileUpdate</span></p><p class="c1"><span class="c0">class Profile(viewsets.ModelViewSet):</span></p><p class="c1"><span class="c0">serializer_class = UserProfileSerializer</span></p><p class="c1"><span class="c0">permission_classes = [</span></p><p class="c1"><span class="c0">permissions.IsAuthenticated</span></p><p class="c1"><span class="c0">]</span></p><p class="c1"><span class="c0">queryset = UserProfile.objects.all()</span></p><p class="c1"><span class="c0">parser_classes = [MultiPartParser, FormParser]</span></p><p class="c1"><span class="c0">def perform_create(self, serializer):</span></p><p class="c1"><span class="c0">&nbsp; &nbsp;serializer.save(user = self.request.user)</span></p><p class="c1"><span class="c0">def get_queryset(self):</span></p><p class="c1"><span class="c0">&nbsp; &nbsp;return self.queryset.filter(user = self.request.user)</span></p><p class="c1"><span class="c0">_______________________________________________________________________________________________</span></p><p class="c3"><span class="c4">ViewSet</span><span>&nbsp;classes of DRF provide operations such as </span><span class="c4">retrieve</span><span>, or </span><span class="c4">update</span><span>&nbsp;and not method handlers such as get or put. In the case of </span><span class="c4">ModelViewSet</span><span class="c0">, we get the complete set of default read and write operations.</span></p><p class="c3"><span>Here under the </span><span class="c4 c8">perform_create</span><span class="c0">&nbsp;method, we are specifying that when the profile is created, the user field of the UserProfile model will be populated with the user who is creating the profile.</span></p><p class="c3"><span class="c0">Since I am uploading images as well (dp field), I am using the parser classes as well. If you are not having any image field, don&rsquo;t bother with it.</span></p><p class="c3"><span>And the </span><span class="c4 c8">get_queryset</span><span class="c0">&nbsp;method is used to filter out the profile data of the user.</span></p><p class="c3"><span>So we have the </span><span class="c4">api </span><span class="c0">ready, now we need to create the api endpoint for it,</span></p><h4 class="c6" id="h.pq6sdffxnzzt"><span class="c7 c4">So in urls.py file, import the Profile class from api.py and add,</span></h4><p class="c1"><span class="c0">_______________________________________________________________________________________________</span></p><p class="c1"><span class="c0">from rest_framework import routers</span></p><p class="c1"><span class="c0">...</span></p><p class="c1"><span class="c0">router = routers.DefaultRouter()</span></p><p class="c1"><span class="c0">router.register(&quot;api/user/profile&quot;, Profile, &quot;profile&quot;)</span></p><p class="c1"><span class="c0">_______________________________________________________________________________________________</span></p><p class="c3"><span class="c0">We are using the DefaultRouter for providing the default get, post and put methods .</span></p><h4 class="c6" id="h.o8geizyb0wql"><span class="c4 c7">Finally we add it to urlpatterns as,</span></h4><p class="c1"><span class="c0">path(&#39;&#39;, include(router.urls)),</span></p><p class="c1"><span class="c0">_______________________________________________________________________________________________</span></p><p class="c3"><span class="c0">That&rsquo;s all there is! Hope you guys enjoyed it.</span></p><p class="c3"><span class="c0">Happy Coding!</span></p></body></html>